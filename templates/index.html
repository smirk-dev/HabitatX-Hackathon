<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mars Habitat Medical Monitoring System</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #000000 0%, #0d0d0d 100%);
            color: #e8eaf6;
            padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Medical grid pattern background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(135, 206, 250, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(135, 206, 250, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: 0;
            pointer-events: none;
        }

        .main-container {
            position: relative;
            z-index: 1;
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Professional Medical Header */
        .header {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            border-radius: 12px;
            padding: 24px 32px;
            margin-bottom: 24px;
            box-shadow: 
                0 4px 6px rgba(0, 0, 0, 0.3),
                0 1px 3px rgba(0, 0, 0, 0.2);
            border-left: 6px solid #87ceeb;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .header h1 {
            font-size: 1.75em;
            font-weight: 600;
            color: #87ceeb;
            letter-spacing: -0.5px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header h1::before {
            content: '‚öï';
            font-size: 1.2em;
            color: #87ceeb;
        }

        .mission-id {
            font-size: 0.95em;
            color: #9ca3af;
            font-weight: 400;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .mission-id::before {
            content: 'üìã';
            font-size: 1.1em;
        }

        .system-time {
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9em;
            color: #cbd5e1;
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 16px;
            border-radius: 6px;
            border: 1px solid rgba(135, 206, 250, 0.2);
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.875em;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            transition: all 0.3s;
        }

        .status-badge::before {
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
        }

        .status-operational {
            background: rgba(16, 185, 129, 0.15);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .status-operational::before {
            background: #10b981;
            animation: statusPulse 2s infinite;
        }

        .status-warning {
            background: rgba(251, 146, 60, 0.15);
            color: #fb923c;
            border: 1px solid rgba(251, 146, 60, 0.3);
        }

        .status-warning::before {
            background: #fb923c;
            animation: statusPulse 2s infinite;
        }

        .status-critical {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .status-critical::before {
            background: #ef4444;
            animation: criticalBlink 0.8s infinite;
        }

        @keyframes statusPulse {
            0%, 100% { opacity: 1; box-shadow: 0 0 0 0 currentColor; }
            50% { opacity: 0.7; box-shadow: 0 0 0 3px transparent; }
        }

        @keyframes criticalBlink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0.4; }
        }

        /* Alert Ticker - Medical Style */
        .alert-ticker {
            background: rgba(30, 58, 138, 0.3);
            border-radius: 8px;
            border: 1px solid rgba(59, 130, 246, 0.3);
            padding: 12px 0;
            margin-bottom: 24px;
            overflow: hidden;
            position: relative;
            backdrop-filter: blur(10px);
        }

        .ticker-label {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: #1e3a8a;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 0.75em;
            font-weight: 600;
            color: #60a5fa;
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 2;
        }

        .ticker-content {
            display: inline-block;
            white-space: nowrap;
            padding-left: 100%;
            animation: ticker 35s linear infinite;
            color: #e0e7ff;
            font-size: 0.9em;
            font-weight: 500;
        }

        @keyframes ticker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }

        /* Medical Dashboard Grid */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 
                0 4px 6px rgba(0, 0, 0, 0.1),
                0 1px 3px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #3b82f6, #60a5fa);
            opacity: 0.8;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 8px 16px rgba(0, 0, 0, 0.15),
                0 2px 4px rgba(0, 0, 0, 0.1);
            border-color: rgba(59, 130, 246, 0.4);
        }

        .card.normal {
            border-left: 4px solid #10b981;
        }

        .card.warning {
            border-left: 4px solid #fb923c;
            background: rgba(251, 146, 60, 0.05);
        }

        .card.critical {
            border-left: 4px solid #ef4444;
            background: rgba(239, 68, 68, 0.05);
            animation: cardAlert 2s infinite;
        }

        @keyframes cardAlert {
            0%, 100% { box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
            50% { box-shadow: 0 4px 6px rgba(239, 68, 68, 0.4); }
        }

        .card h3 {
            font-size: 0.875em;
            font-weight: 600;
            margin-bottom: 16px;
            color: #94a3b8;
            display: flex;
            align-items: center;
            justify-content: space-between;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .card-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            background: rgba(59, 130, 246, 0.15);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .metric-value {
            font-size: 2.75em;
            font-weight: 700;
            margin: 20px 0 12px 0;
            color: #ffffff;
            letter-spacing: -1px;
            line-height: 1;
        }

        .metric-unit {
            font-size: 0.4em;
            font-weight: 500;
            color: #94a3b8;
            margin-left: 8px;
        }

        .metric-label {
            color: #cbd5e1;
            font-size: 0.825em;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .metric-change {
            font-size: 0.75em;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 4px;
            margin-left: auto;
        }

        .metric-change.positive {
            color: #10b981;
            background: rgba(16, 185, 129, 0.15);
        }

        .metric-change.negative {
            color: #ef4444;
            background: rgba(239, 68, 68, 0.15);
        }

        .system-indicator {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8em;
            font-weight: 500;
            padding: 4px 10px;
            border-radius: 12px;
            background: rgba(16, 185, 129, 0.15);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .system-indicator::before {
            content: '';
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
            animation: indicatorPulse 2s infinite;
        }

        @keyframes indicatorPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }

        .indicator-warning {
            background: rgba(251, 146, 60, 0.15);
            color: #fb923c;
            border-color: rgba(251, 146, 60, 0.3);
        }

        .indicator-critical {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
            border-color: rgba(239, 68, 68, 0.3);
        }

        .indicator-critical::before {
            animation: criticalIndicator 0.6s infinite;
        }

        @keyframes criticalIndicator {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0.2; }
        }

        /* Medical-grade Health Index Display */
        .health-index {
            position: relative;
            width: 180px;
            height: 180px;
            margin: 20px auto;
        }

        .health-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: conic-gradient(
                from 0deg,
                #10b981 0deg,
                #10b981 calc(var(--health-percent) * 3.6deg),
                rgba(100, 116, 139, 0.2) calc(var(--health-percent) * 3.6deg),
                rgba(100, 116, 139, 0.2) 360deg
            );
            box-shadow: 
                0 4px 6px rgba(0, 0, 0, 0.1),
                inset 0 0 20px rgba(16, 185, 129, 0.2);
        }

        .health-inner {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.8), rgba(30, 64, 175, 0.8));
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            border: 2px solid rgba(59, 130, 246, 0.3);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .health-inner #healthValue {
            font-size: 2.5em;
            font-weight: 700;
            color: #ffffff;
            letter-spacing: -1px;
        }

        .health-inner span {
            font-size: 0.7em;
            color: #94a3b8;
            font-weight: 500;
            margin-top: 4px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Medical Chart Containers */
        .chart-container {
            position: relative;
            height: 280px;
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 16px;
            border-radius: 8px;
            backdrop-filter: blur(5px);
        }

        .large-chart {
            grid-column: 1 / -1;
        }

        /* Clinical Alert Display */
        .alerts-container {
            max-height: 450px;
            overflow-y: auto;
            padding: 4px;
        }

        .alerts-container::-webkit-scrollbar {
            width: 6px;
        }

        .alerts-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .alerts-container::-webkit-scrollbar-thumb {
            background: rgba(59, 130, 246, 0.5);
            border-radius: 3px;
        }

        .alert-item {
            background: rgba(255, 255, 255, 0.03);
            border-left: 3px solid;
            padding: 12px 16px;
            margin-bottom: 10px;
            border-radius: 6px;
            animation: alertSlideIn 0.4s ease-out;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }

        .alert-item:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateX(4px);
        }

        @keyframes alertSlideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .alert-critical {
            border-left-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
            animation: alertBlink 1.5s infinite;
        }

        .alert-high {
            border-left-color: #ef4444;
            background: rgba(239, 68, 68, 0.05);
        }

        .alert-medium {
            border-left-color: #fb923c;
            background: rgba(251, 146, 60, 0.05);
        }

        .alert-low {
            border-left-color: #3b82f6;
            background: rgba(59, 130, 246, 0.05);
        }

        @keyframes alertBlink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0.7; }
        }

        .alert-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 6px;
        }

        .alert-type {
            font-weight: 600;
            font-size: 0.875em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .alert-time {
            font-size: 0.75em;
            color: #64748b;
            font-family: 'Roboto Mono', monospace;
        }

        .alert-message {
            color: #cbd5e1;
            font-size: 0.875em;
            line-height: 1.5;
        }

        /* Medical Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.03);
            padding: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            text-align: center;
            transition: all 0.3s;
        }

        .stat-box:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .stat-box .value {
            font-size: 1.75em;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 6px;
        }

        .stat-box .label {
            font-size: 0.75em;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        /* Medical Prediction Display */
        .prediction-box {
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.3), rgba(30, 64, 175, 0.3));
            border: 1px solid rgba(59, 130, 246, 0.3);
            padding: 20px;
            border-radius: 12px;
            margin-top: 16px;
            backdrop-filter: blur(10px);
        }

        .prediction-box h4 {
            color: #93c5fd;
            margin-bottom: 16px;
            font-size: 0.875em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .failure-probability {
            font-size: 2.5em;
            font-weight: 700;
            margin: 12px 0;
            color: #ffffff;
            letter-spacing: -1px;
        }

        .ai-status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: rgba(0, 255, 0, 0.1);
            border-left: 3px solid #00ff00;
            margin: 5px 0;
            font-size: 0.9em;
        }

        .confidence-meter {
            width: 100%;
            height: 8px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #00ff00;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff0000, #ffa500, #00ff00);
            transition: width 1s ease;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.8);
        }

        .icon {
            font-size: 1.3em;
            filter: drop-shadow(0 0 5px currentColor);
        }

        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(0, 255, 0, 0.3);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 0, 0.6);
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.8);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 0, 0.9);
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.8em;
            color: #00ff00;
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 20px #00ff00;
            animation: loadingPulse 1.5s infinite;
        }

        @keyframes loadingPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Glitch effect for critical states */
        .glitch {
            animation: glitch 0.3s infinite;
        }

        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        /* Data streaming effect */
        .data-stream {
            position: fixed;
            top: 0;
            right: 0;
            width: 100px;
            height: 100%;
            background: linear-gradient(180deg, transparent, rgba(0, 255, 0, 0.1), transparent);
            pointer-events: none;
            animation: dataFlow 2s linear infinite;
            z-index: 0;
        }

        @keyframes dataFlow {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }
    </style>
</head>
<body>
    <div class="main-container">
    <div class="header">
        <div class="header-top">
            <h1>Mars Habitat Medical Monitoring System</h1>
            <div class="system-time" id="currentTime"></div>
        </div>
        <div class="mission-id">
            Mission ID: MHS-2025-Œ± | Sol 1247 | Habitat Zone-3
        </div>
        <div style="display: flex; gap: 12px; align-items: center; margin-top: 12px; flex-wrap: wrap;">
            <div id="systemStatus" class="status-badge status-operational">System Operational</div>
            <span style="color: #cbd5e1; font-size: 0.85em;">
                Updates: <span id="updateCounter" style="font-family: 'Roboto Mono', monospace; color: #60a5fa;">0</span>
            </span>
            <span style="color: #cbd5e1; font-size: 0.85em;">
                Uptime: <span id="uptime" style="font-family: 'Roboto Mono', monospace; color: #60a5fa;">00:00:00</span>
            </span>
        </div>
    </div>

    <!-- Medical Alert Ticker -->
    <div class="alert-ticker">
        <div class="ticker-label">ALERTS</div>
        <div class="ticker-content" id="tickerContent">
            System Initialized ‚Ä¢ All Vital Signs Monitoring Active ‚Ä¢ Environmental Controls Nominal ‚Ä¢ AI Predictive Analysis Online ‚Ä¢ Medical Data Streaming Active ‚Ä¢
        </div>
    </div>

    <div class="dashboard">
        <!-- Health Index -->
        <div class="card">
            <h3>
                <span class="card-icon">‚ù§Ô∏è</span>
                Habitat Health Index
            </h3>
            <div class="health-index">
                <div class="health-circle" id="healthCircle">
                    <div class="health-inner">
                        <div id="healthValue">100</div>
                        <span>Overall Health</span>
                    </div>
                </div>
            </div>
            <div class="system-indicator" id="healthStatusIndicator">
                Optimal Condition
            </div>
        </div>

        <!-- Temperature -->
        <div class="card" id="tempCard">
            <h3>
                <span class="card-icon">üå°Ô∏è</span>
                Temperature
                <span class="system-indicator" id="tempIndicator">Normal</span>
            </h3>
            <div class="metric-value" id="currentTemp">
                --<span class="metric-unit">¬∞C</span>
            </div>
            <div class="metric-label">
                Reference Range: 20-24¬∞C
            </div>
            <div class="chart-container">
                <canvas id="tempChart"></canvas>
            </div>
        </div>

        <!-- Humidity -->
        <div class="card" id="humidityCard">
            <h3><span class="icon">üíß</span> HUMIDITY SENSOR</h3>
            <div class="metric-value" id="currentHumidity" style="color: #4ecdc4;">--</div>
            <div class="metric-label">% RH | OPTIMAL: 40-60%</div>
            <div class="system-indicator indicator-online" style="margin: 10px 0;"></div>
            <div style="color: #00ff00; font-size: 0.85em;">STATUS: <span id="humidityStatus">NOMINAL</span></div>
            <div class="chart-container">
                <canvas id="humidityChart"></canvas>
            </div>
        </div>

        <!-- Pressure -->
        <div class="card" id="pressureCard">
            <h3><span class="icon">üìä</span> PRESSURE SENSOR</h3>
            <div class="metric-value" id="currentPressure" style="color: #45b7d1;">--</div>
            <div class="metric-label">kPa | OPTIMAL: 100-102 kPa</div>
            <div class="system-indicator indicator-online" style="margin: 10px 0;"></div>
            <div style="color: #00ff00; font-size: 0.85em;">STATUS: <span id="pressureStatus">NOMINAL</span></div>
            <div class="chart-container">
                <canvas id="pressureChart"></canvas>
            </div>
        </div>

        <!-- O2 Level (Simulated) -->
        <div class="card">
            <h3><span class="icon">ü´Å</span> OXYGEN LEVEL</h3>
            <div class="metric-value" style="color: #00ff00;"><span id="o2Level">21.0</span></div>
            <div class="metric-label">% O‚ÇÇ | OPTIMAL: 19.5-23.5%</div>
            <div class="system-indicator indicator-online" style="margin: 10px 0;"></div>
            <div style="color: #00ff00; font-size: 0.85em;">STATUS: NOMINAL</div>
            <div style="margin-top: 15px; padding: 10px; background: rgba(0, 255, 0, 0.1); border: 1px solid #00ff00; font-size: 0.85em;">
                <div>SCRUBBER: ACTIVE</div>
                <div style="margin-top: 5px;">FLOW RATE: 42.5 L/min</div>
            </div>
        </div>

        <!-- CO2 Level (Simulated) -->
        <div class="card">
            <h3><span class="icon">‚öóÔ∏è</span> CO‚ÇÇ CONCENTRATION</h3>
            <div class="metric-value" style="color: #ffa500;"><span id="co2Level">0.04</span></div>
            <div class="metric-label">% CO‚ÇÇ | CRITICAL: >0.5%</div>
            <div class="system-indicator indicator-online" style="margin: 10px 0;"></div>
            <div style="color: #00ff00; font-size: 0.85em;">STATUS: NOMINAL</div>
            <div style="margin-top: 15px; padding: 10px; background: rgba(255, 165, 0, 0.1); border: 1px solid #ffa500; font-size: 0.85em;">
                <div>REMOVAL RATE: 98.2%</div>
                <div style="margin-top: 5px;">NEXT SERVICE: 47 SOLS</div>
            </div>
        </div>

        <!-- Power Status (Simulated) -->
        <div class="card">
            <h3><span class="icon">‚ö°</span> POWER SYSTEMS</h3>
            <div class="metric-value" style="color: #ffff00;"><span id="powerLevel">87</span></div>
            <div class="metric-label">% CHARGE | SOLAR ARRAY STATUS</div>
            <div class="system-indicator indicator-online" style="margin: 10px 0;"></div>
            <div style="color: #00ff00; font-size: 0.85em;">STATUS: NOMINAL</div>
            <div style="margin-top: 15px; padding: 10px; background: rgba(255, 255, 0, 0.1); border: 1px solid #ffff00; font-size: 0.85em;">
                <div>GENERATION: 4.2 kW</div>
                <div style="margin-top: 5px;">CONSUMPTION: 3.8 kW</div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="card">
            <h3><span class="icon">üìà</span> STATISTICAL ANALYSIS</h3>
            <div class="stats-grid">
                <div class="stat-box">
                    <div class="value" id="tempMean">--</div>
                    <div class="label">TEMP MEAN</div>
                </div>
                <div class="stat-box">
                    <div class="value" id="humidityMean">--</div>
                    <div class="label">HUM MEAN</div>
                </div>
                <div class="stat-box">
                    <div class="value" id="pressureMean">--</div>
                    <div class="label">PRESS MEAN</div>
                </div>
                <div class="stat-box">
                    <div class="value" id="tempStd">--</div>
                    <div class="label">TEMP œÉ</div>
                </div>
                <div class="stat-box">
                    <div class="value" id="humidityStd">--</div>
                    <div class="label">HUM œÉ</div>
                </div>
                <div class="stat-box">
                    <div class="value" id="pressureStd">--</div>
                    <div class="label">PRESS œÉ</div>
                </div>
            </div>
        </div>

        <!-- AI Predictions -->
        <div class="card">
            <h3><span class="icon">ü§ñ</span> AI FAILURE PREDICTION</h3>
            <div class="prediction-box">
                <h4>‚óà SYSTEM FAILURE PROBABILITY ‚óà</h4>
                <div class="failure-probability" id="failureProb">--</div>
                <div style="color: #00ffff;">TIME TO FAILURE: <span id="timeToFailure">CALCULATING...</span></div>
                <div class="confidence-meter" title="Prediction Confidence" style="margin-top: 15px;">
                    <div class="confidence-fill" id="predictionConfidence" style="width: 88%;"></div>
                </div>
                <div style="text-align: center; margin-top: 8px; color: #00ff00; font-size: 0.85em;">
                    MODEL CONFIDENCE: <span id="predictionConfidenceText">88%</span>
                </div>
            </div>
            <div style="margin-top: 20px; padding: 15px; background: rgba(0, 0, 0, 0.8); border: 1px solid #00ff00; border-radius: 5px;">
                <div style="font-size: 0.9em; color: #00ffff; margin-bottom: 10px; font-family: 'Orbitron', sans-serif;">AI MODEL STATUS:</div>
                <div class="ai-status-indicator">
                    <span class="system-indicator indicator-online"></span>
                    STATISTICAL ML ACTIVE
                </div>
                <div class="ai-status-indicator">
                    <span class="system-indicator indicator-online"></span>
                    TIME SERIES ANALYSIS ONLINE
                </div>
                <div class="ai-status-indicator">
                    <span class="system-indicator indicator-online"></span>
                    PREDICTIVE MAINTENANCE ENGAGED
                </div>
                <div class="ai-status-indicator">
                    <span class="system-indicator indicator-online"></span>
                    ANOMALY DETECTION: 2œÉ THRESHOLD
                </div>
            </div>
        </div>

        <!-- Alerts -->
        <div class="card large-chart">
            <h3><span class="icon">üö®</span> SYSTEM ALERTS & NOTIFICATIONS</h3>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding: 10px; background: rgba(0, 255, 0, 0.1); border: 1px solid #00ff00;">
                <span style="font-family: 'Orbitron', sans-serif; font-size: 0.9em; color: #00ff00;">ALERT FEED: LIVE</span>
                <span style="color: #00ffff; font-size: 0.85em;">TOTAL ALERTS: <span id="totalAlerts">0</span></span>
            </div>
            <div class="alerts-container" id="alertsContainer">
                <div class="loading">
                    ‚ó¢‚ó§ INITIALIZING ALERT SYSTEM ‚ó¢‚ó§
                </div>
            </div>
        </div>

        <!-- Historical Data Chart -->
        <div class="card large-chart">
            <h3><span class="icon">üìâ</span> HISTORICAL SENSOR DATA</h3>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding: 10px; background: rgba(0, 255, 255, 0.1); border: 1px solid #00ffff; font-size: 0.85em;">
                <span style="color: #00ffff; font-family: 'Orbitron', sans-serif;">DATA POINTS: <span id="dataPoints">0</span></span>
                <span style="color: #00ff00;">SAMPLING RATE: 0.5 Hz</span>
                <span style="color: #ffa500;">BUFFER: 100 READINGS</span>
            </div>
            <div class="chart-container" style="height: 350px;">
                <canvas id="historicalChart"></canvas>
            </div>
        </div>
    </div>
    </div> <!-- End main-container -->

    <script>
        let updateCount = 0;
        let charts = {};
        let startTime = Date.now();

        // Simulate additional metrics
        function simulateO2Level() {
            return (20.8 + Math.random() * 0.4).toFixed(1);
        }

        function simulateCO2Level() {
            return (0.03 + Math.random() * 0.02).toFixed(2);
        }

        function simulatePowerLevel() {
            return Math.floor(85 + Math.random() * 10);
        }

        // Update uptime
        function updateUptime() {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const hours = Math.floor(elapsed / 3600).toString().padStart(2, '0');
            const minutes = Math.floor((elapsed % 3600) / 60).toString().padStart(2, '0');
            const seconds = (elapsed % 60).toString().padStart(2, '0');
            document.getElementById('uptime').textContent = `${hours}:${minutes}:${seconds}`;
        }

        // Initialize charts with dark theme
        function initCharts() {
            const chartConfig = {
                type: 'line',
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: { 
                            display: false,
                            grid: { color: 'rgba(0, 255, 0, 0.1)' }
                        },
                        y: { 
                            ticks: { color: '#00ff00', font: { family: 'Share Tech Mono' } },
                            grid: { color: 'rgba(0, 255, 0, 0.2)' }
                        }
                    },
                    elements: {
                        line: { tension: 0.4, borderWidth: 2 },
                        point: { radius: 0, hitRadius: 10 }
                    }
                }
            };

            // Temperature chart
            charts.temp = new Chart(document.getElementById('tempChart'), {
                ...chartConfig,
                data: {
                    labels: [],
                    datasets: [{
                        data: [],
                        borderColor: '#ff6b6b',
                        backgroundColor: 'rgba(255, 107, 107, 0.2)',
                        fill: true
                    }]
                }
            });

            // Humidity chart
            charts.humidity = new Chart(document.getElementById('humidityChart'), {
                ...chartConfig,
                data: {
                    labels: [],
                    datasets: [{
                        data: [],
                        borderColor: '#4ecdc4',
                        backgroundColor: 'rgba(78, 205, 196, 0.2)',
                        fill: true
                    }]
                }
            });

            // Pressure chart
            charts.pressure = new Chart(document.getElementById('pressureChart'), {
                ...chartConfig,
                data: {
                    labels: [],
                    datasets: [{
                        data: [],
                        borderColor: '#45b7d1',
                        backgroundColor: 'rgba(69, 183, 209, 0.2)',
                        fill: true
                    }]
                }
            });

            // Historical chart with dark theme
            charts.historical = new Chart(document.getElementById('historicalChart'), {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [
                        {
                            label: 'TEMPERATURE',
                            data: [],
                            borderColor: '#ff6b6b',
                            backgroundColor: 'rgba(255, 107, 107, 0.1)',
                            yAxisID: 'y',
                            borderWidth: 2
                        },
                        {
                            label: 'HUMIDITY',
                            data: [],
                            borderColor: '#4ecdc4',
                            backgroundColor: 'rgba(78, 205, 196, 0.1)',
                            yAxisID: 'y1',
                            borderWidth: 2
                        },
                        {
                            label: 'PRESSURE',
                            data: [],
                            borderColor: '#45b7d1',
                            backgroundColor: 'rgba(69, 183, 209, 0.1)',
                            yAxisID: 'y2',
                            borderWidth: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            labels: { 
                                color: '#00ff00',
                                font: { family: 'Orbitron', size: 12 }
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#00ff00', maxTicksLimit: 10, font: { family: 'Share Tech Mono' } },
                            grid: { color: 'rgba(0, 255, 0, 0.2)' }
                        },
                        y: {
                            type: 'linear',
                            position: 'left',
                            ticks: { color: '#ff6b6b', font: { family: 'Share Tech Mono' } },
                            grid: { color: 'rgba(255, 107, 107, 0.2)' }
                        },
                        y1: {
                            type: 'linear',
                            position: 'right',
                            ticks: { color: '#4ecdc4', font: { family: 'Share Tech Mono' } },
                            grid: { display: false }
                        },
                        y2: {
                            type: 'linear',
                            position: 'right',
                            ticks: { color: '#45b7d1', font: { family: 'Share Tech Mono' } },
                            grid: { display: false }
                        }
                    },
                    elements: {
                        line: { tension: 0.4 },
                        point: { radius: 2 }
                    }
                }
            });
        }

        // Update current data with status indicators
        async function updateCurrentData() {
            try {
                const response = await fetch('/api/current');
                const data = await response.json();

                const temp = data.temperature;
                const humidity = data.humidity;
                const pressure = data.pressure;

                // Update values
                document.getElementById('currentTemp').textContent = temp.toFixed(1);
                document.getElementById('currentHumidity').textContent = humidity.toFixed(1);
                document.getElementById('currentPressure').textContent = pressure.toFixed(1);

                // Update simulated metrics
                document.getElementById('o2Level').textContent = simulateO2Level();
                document.getElementById('co2Level').textContent = simulateCO2Level();
                document.getElementById('powerLevel').textContent = simulatePowerLevel();

                // Update status based on thresholds
                updateSensorStatus('temp', temp, 20, 24);
                updateSensorStatus('humidity', humidity, 40, 60);
                updateSensorStatus('pressure', pressure, 100, 102);

                // Update health index
                const healthValue = data.health_index;
                document.getElementById('healthValue').textContent = healthValue.toFixed(0);
                document.getElementById('healthCircle').style.setProperty('--health-percent', healthValue + '%');

                // Update status badge
                const statusBadge = document.getElementById('systemStatus');
                const indicator = statusBadge.querySelector('.system-indicator');
                
                if (healthValue >= 80) {
                    statusBadge.className = 'status-badge status-operational';
                    statusBadge.innerHTML = '<span class="system-indicator indicator-online"></span>ALL SYSTEMS OPERATIONAL';
                } else if (healthValue >= 60) {
                    statusBadge.className = 'status-badge status-warning';
                    statusBadge.innerHTML = '<span class="system-indicator indicator-warning"></span>CAUTION: MONITOR SYSTEMS';
                } else {
                    statusBadge.className = 'status-badge status-critical';
                    statusBadge.innerHTML = '<span class="system-indicator indicator-critical"></span>CRITICAL: IMMEDIATE ACTION';
                    statusBadge.classList.add('glitch');
                }

                updateCount++;
                document.getElementById('updateCounter').textContent = `UPDATES: ${updateCount}`;
            } catch (error) {
                console.error('Error fetching current data:', error);
            }
        }

        // Update sensor status indicators
        function updateSensorStatus(sensor, value, min, max) {
            const statusElem = document.getElementById(`${sensor}Status`);
            const card = document.getElementById(`${sensor}Card`);
            
            if (value < min || value > max) {
                statusElem.textContent = 'ANOMALY DETECTED';
                statusElem.style.color = '#ff0000';
                card.classList.add('critical');
                card.classList.remove('warning');
            } else if (value < min + 1 || value > max - 1) {
                statusElem.textContent = 'WARNING';
                statusElem.style.color = '#ffa500';
                card.classList.add('warning');
                card.classList.remove('critical');
            } else {
                statusElem.textContent = 'NOMINAL';
                statusElem.style.color = '#00ff00';
                card.classList.remove('critical', 'warning');
            }
        }

        // Update history with data points counter
        async function updateHistory() {
            try {
                const response = await fetch('/api/history');
                const data = await response.json();

                document.getElementById('dataPoints').textContent = data.temperature.length;

                const recentData = {
                    temp: data.temperature.slice(-20),
                    humidity: data.humidity.slice(-20),
                    pressure: data.pressure.slice(-20),
                    timestamps: data.timestamps.slice(-20).map(t => new Date(t).toLocaleTimeString('en-US', { hour12: false, timeStyle: 'short' }))
                };

                // Update mini charts
                charts.temp.data.labels = recentData.timestamps;
                charts.temp.data.datasets[0].data = recentData.temp;
                charts.temp.update('none');

                charts.humidity.data.labels = recentData.timestamps;
                charts.humidity.data.datasets[0].data = recentData.humidity;
                charts.humidity.update('none');

                charts.pressure.data.labels = recentData.timestamps;
                charts.pressure.data.datasets[0].data = recentData.pressure;
                charts.pressure.update('none');

                // Update historical chart
                const fullData = {
                    timestamps: data.timestamps.map(t => new Date(t).toLocaleTimeString('en-US', { hour12: false, timeStyle: 'short' })),
                    temp: data.temperature,
                    humidity: data.humidity,
                    pressure: data.pressure
                };

                charts.historical.data.labels = fullData.timestamps;
                charts.historical.data.datasets[0].data = fullData.temp;
                charts.historical.data.datasets[1].data = fullData.humidity;
                charts.historical.data.datasets[2].data = fullData.pressure;
                charts.historical.update('none');
            } catch (error) {
                console.error('Error fetching history:', error);
            }
        }

        // Update alerts with new styling
        async function updateAlerts() {
            try {
                const response = await fetch('/api/alerts');
                const data = await response.json();

                const container = document.getElementById('alertsContainer');
                document.getElementById('totalAlerts').textContent = data.count;
                
                if (data.alerts.length === 0) {
                    container.innerHTML = '<div style="text-align: center; padding: 30px; color: #00ff00; font-family: Orbitron, sans-serif; font-size: 1.2em; text-shadow: 0 0 10px #00ff00;">‚óà NO ALERTS - ALL SYSTEMS NOMINAL ‚óà</div>';
                } else {
                    container.innerHTML = data.alerts.reverse().map(alert => `
                        <div class="alert-item alert-${alert.severity.toLowerCase()}">
                            <div style="font-family: 'Orbitron', sans-serif; font-size: 1.1em; margin-bottom: 5px;">
                                <strong>[${alert.type}]</strong> ${alert.message}
                            </div>
                            <div class="alert-time">‚è± ${new Date(alert.timestamp).toLocaleTimeString('en-US', { hour12: false })} UTC</div>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('Error fetching alerts:', error);
            }
        }

        // Update statistics
        async function updateStats() {
            try {
                const response = await fetch('/api/stats');
                const data = await response.json();

                document.getElementById('tempMean').textContent = data.temperature.mean;
                document.getElementById('humidityMean').textContent = data.humidity.mean;
                document.getElementById('pressureMean').textContent = data.pressure.mean;
                document.getElementById('tempStd').textContent = data.temperature.std;
                document.getElementById('humidityStd').textContent = data.humidity.std;
                document.getElementById('pressureStd').textContent = data.pressure.std;
            } catch (error) {
                console.error('Error fetching stats:', error);
            }
        }

        // Update predictions
        async function updatePredictions() {
            try {
                const response = await fetch('/api/predictions');
                if (!response.ok) {
                    // Not enough data yet, show initializing message
                    document.getElementById('failureProb').textContent = '- -';
                    document.getElementById('timeToFailure').textContent = 'Initializing...';
                    return;
                }
                
                const data = await response.json();

                const failureProb = data.failure_probability;
                const failureProbElem = document.getElementById('failureProb');
                failureProbElem.textContent = failureProb + '%';

                if (failureProb < 20) {
                    failureProbElem.style.color = '#2ecc71';
                } else if (failureProb < 50) {
                    failureProbElem.style.color = '#f39c12';
                } else {
                    failureProbElem.style.color = '#e74c3c';
                }

                document.getElementById('timeToFailure').textContent = data.estimated_time_to_failure;
            } catch (error) {
                console.error('Error fetching predictions:', error);
                document.getElementById('failureProb').textContent = '- -';
                document.getElementById('timeToFailure').textContent = 'Initializing...';
            }
        }

        // Update clock with UTC time
        function updateClock() {
            const now = new Date();
            const utcString = now.toISOString().replace('T', ' ').substring(0, 19);
            document.getElementById('currentTime').textContent = utcString;
        }

        // Initialize and start
        initCharts();
        updateCurrentData();
        updateHistory();
        updateAlerts();
        updateStats();
        updatePredictions();
        updateClock();
        updateUptime();

        // Set up intervals
        setInterval(updateCurrentData, 2000);  // Every 2 seconds
        setInterval(updateHistory, 2000);
        setInterval(updateAlerts, 3000);
        setInterval(updateStats, 5000);
        setInterval(updatePredictions, 10000);
        setInterval(updateClock, 1000);
        setInterval(updateUptime, 1000);
    </script>
</body>
</html>
